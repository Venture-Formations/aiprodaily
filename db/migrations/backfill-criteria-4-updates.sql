-- Backfill Criteria 4 scores from failed deployment
-- Generated from Vercel logs on 2025-11-05
-- This script updates post_ratings with criteria 4 scores and recalculated totals

-- Update post_ratings by joining on post_id
UPDATE post_ratings pr
SET
  criteria_4_score = updates.score,
  criteria_4_weight = 1.5,
  total_score = updates.new_total
FROM (VALUES
  ('2c11a441-6546-4dfe-bd0b-607ca36547dd', 9, 37.5),
  ('61c00f5d-337d-4ff8-a2c4-ff3e7d6ad582', 9, 27.5),
  ('858dbbed-7397-44e1-9c4d-9dd98e0847df', 9, 26.5),
  ('03c7fabb-cbaf-4b59-a32c-38e634e96bca', 9, 26),
  ('dc4a3918-1079-490e-a41f-3e92ab843ad7', 4, 23),
  ('b8a130e7-aad4-4a92-b22e-7f7896b49cfc', 1, 15.5),
  ('9c0fc18a-3203-48f0-9e71-d346029e85e1', 8, 23),
  ('ee800c90-ef1a-4d63-ab0d-3a19fdccc641', 9, 30),
  ('3049501e-e0f9-4ba7-afe1-acfed7ae849b', 8, 22),
  ('723afddb-4510-46d5-a789-a097f4fb8d02', 8, 19),
  ('fe0d5977-b0f7-4bb8-a563-e5bccaf4b5e3', 9, 25),
  ('1c71579a-d78b-4bc8-83d7-abbd8ae4732d', 10, 39),
  ('4461f67a-da8d-40bb-8128-61884b45b2ab', 9, 34.5),
  ('23e4ef83-fbba-4381-a150-2f820e3c0dc0', 2, 12.5),
  ('0755afbe-59d9-4b4c-bd62-acf867cd8ea5', 6, 19),
  ('315e1bed-4c76-406e-9149-cec4fa27b7f1', 9, 23.5),
  ('3a8be402-38bb-40a8-8e1c-3f366e4848d7', 9, 26.5),
  ('f07de405-7d8b-432f-85e4-f7a83f005234', 6, 23),
  ('129247bc-550e-43cf-8be8-8b8d5049d3d2', 1, 20),
  ('71a5c9a2-04d8-4e19-9b8b-67e4a64d392c', 1, 24.5),
  ('40974047-2b2e-431c-8a77-6cf098ead6bd', 8, 20.5),
  ('d36236c2-8cef-40a0-b027-9ddc91bacfc4', 9, 35.5),
  ('2ab20010-33ee-4f9b-b544-b7fdf481a721', 1, 14),
  ('7496dbaf-d6ee-4701-b6bb-8dcc2702499a', 8, 23.5),
  ('01f5b457-a88d-4f1d-a1b1-dfb074e658db', 9, 29.5),
  ('2175edfd-3d07-4232-9d42-c51e34bfd48f', 1, 6),
  ('ff213aad-7340-45b7-8fff-0131ce0ab7cf', 8, 30),
  ('4db3bb67-2253-4934-a374-4c9d0cb558f2', 6, 23),
  ('0f806e14-8ed0-4729-b892-4e47ced279d0', 8, 29),
  ('f5990433-03d4-4ffa-8579-a1d0fb62df1e', 9, 26.5),
  ('cbafd0ae-9acf-41eb-87bc-527e96356700', 6, 27),
  ('4a8780de-dc10-44b1-8615-bde14103ed0a', 1, 7),
  ('270b7101-252f-4885-aea9-4119c6824c81', 2, 18.5),
  ('562a216f-7911-4696-abaf-a036e6a2b76f', 6, 23.5),
  ('24b6c633-67cb-4631-a802-16c2596829fb', 9, 27.5),
  ('617c6440-56e4-4306-9aab-eed3071cb7f4', 6, 22.5),
  ('28db76af-d202-4d82-91e1-f7c5f3575222', 6, 20.5),
  ('4845b036-5238-4dab-adfa-c4fbe3561867', 9, 27.5),
  ('b80d3509-83e2-4a82-8175-ef1947e8f6f7', 8, 19),
  ('9c8fbc52-e626-4275-ba62-ca8ab44011e8', 7, 26),
  ('4d83220a-6f28-426a-9f2e-9822106c1a5e', 8, 23),
  ('fe8c66c0-6746-4cc4-a6db-ea645294e1c6', 9, 33.5),
  ('7c9a0c19-1ea4-4870-b962-c8cf9842cbb7', 8, 26),
  ('db5a8f39-63c5-4ab0-b7f4-198da2f06f30', 9, 30.5),
  ('fea14231-cfe0-44e3-b69b-1a643b61bf9b', 9, 36),
  ('2f2a38ca-be1a-46a8-91c7-3fdd40feab3e', 9, 24.5),
  ('1deeef14-7601-484f-ab40-c590f7e2cc35', 8, 12),
  ('d1d86064-7dee-4667-a486-69ca2eb8fd37', 6, 31),
  ('6c9019fa-2f4d-4eb1-85b9-a3a1372e7cf1', 9, 19),
  ('fbb20cce-c564-4c01-8113-f6f79414a160', 10, 29),
  ('7c4e831e-b889-47f4-bed8-dd95c52e969c', 9, 30.5),
  ('69c8eaf8-37df-4983-a7ea-3a1dc1d257c3', 9, 29),
  ('e32525ec-2518-4d12-8417-a372edc00533', 2, 23.5),
  ('97dc0c74-151e-4fbc-95d4-6e47402818e5', 7, 30),
  ('15eaa269-b2c1-4ee8-a10c-711b12968381', 9, 19),
  ('d0179711-f6b4-4fb6-ad50-35e6303dd1ee', 10, 33),
  ('3c25ede1-05b5-4fb7-9c7d-47b4ed544eb9', 2, 25.5),
  ('903909dd-ff43-48dd-8f5d-e905b17a36b2', 9, 29),
  ('b690ec33-3388-41f7-b583-accdb04973fe', 9, 29.5),
  ('80964356-6a95-4e5b-a517-148536c6da2d', 2, 24.5),
  ('79c70132-9733-42a8-8b5a-ae5bbdf4b195', 8, 31),
  ('387e1899-ddcf-4af7-b66c-0060ec0c9e2a', 10, 35.5),
  ('15387950-71bb-49c3-b86a-53ea4103f894', 6, 17.5),
  ('fd27d6fe-9a34-4dde-b479-5f4c8142b4c1', 1, 8.5),
  ('fdac1271-e5f6-4136-be92-92ae594695cf', 9, 19.5),
  ('e2501f43-3fde-457d-a772-2116fdb44d10', 9, 32),
  ('443beb3e-e9d3-4655-b914-6c49376be4d9', 9, 30.5),
  ('bbb62d2e-af9d-4400-961a-22e066c442c0', 9, 30.5),
  ('b398b74f-0208-4bbd-99eb-5d3efafff079', 8, 29),
  ('d261831a-4a05-4276-b4a8-25e5fa6040ba', 9, 24.5),
  ('622eb13e-6bdd-486d-8617-65454be24540', 9, 26.5),
  ('d0de0888-0216-4821-b1e0-95d559c0d821', 9, 29),
  ('e92a86af-c381-471e-8365-7c7b272d0b62', 1, 14.5),
  ('dc323aa4-2aa4-4b75-887c-e75c3a05f858', 8, 27),
  ('62c7a91f-d5ed-4761-84e7-8b05869e3c6f', 8, 26),
  ('91862bca-6508-4c8a-b140-81d7cbdf100e', 9, 28),
  ('35d18bb8-43cc-45b6-8454-3e619129e506', 9, 32),
  ('6a008c4d-cfaf-4418-9eda-b77b135baeed', 6, 20),
  ('981c45b8-efe1-48ae-abdf-bbc0a9406557', 9, 29),
  ('5b077e06-684f-489f-9433-55e1435082fc', 7, 30),
  ('71ff383d-87b8-4e7c-bcdc-233729186e5a', 9, 32),
  ('e136d124-ba92-42db-b111-658c0055aefa', 10, 40.5),
  ('72311739-3d33-4bd8-aca0-94507a081c38', 7, 30),
  ('416f6692-bb19-4345-9655-082740bb0291', 9, 30),
  ('61bdd5d4-45d0-4760-882f-3d9e91dac558', 9, 26.5),
  ('91d3f4f8-1c77-4bc4-a52c-863ae4068ef6', 9, 32.5),
  ('f9413558-ea4e-43c4-9431-dd78942299ab', 9, 34.5),
  ('38ead7db-27c3-4ca2-9014-f06922442063', 10, 29),
  ('974306bc-46ed-4139-913e-4bbc5665747b', 8, 29),
  ('5dc91ff2-d648-4b86-80ab-654be714c682', 7, 22),
  ('0468fdb9-929c-4d32-b4a0-729af5446f75', 8, 12),
  ('01dcf770-8d03-4716-9b6f-a25d0a62f697', 10, 38),
  ('b25c763d-ab5c-481b-beeb-92841f2628a3', 8, 28),
  ('1dd15b08-f6aa-4c46-8407-33710dab57ac', 8, 23.5),
  ('42763c29-4ca0-43ae-926f-242aec988742', 9, 26),
  ('d22bf02e-84a7-4e73-8f48-09aeee0c0a00', 9, 37.5)
) AS updates(post_id, score, new_total)
WHERE pr.post_id = updates.post_id::uuid;

-- Show summary of updates
SELECT
  'Updated' as status,
  COUNT(*) as count
FROM post_ratings
WHERE criteria_4_score IS NOT NULL
  AND criteria_4_weight = 1.5;
